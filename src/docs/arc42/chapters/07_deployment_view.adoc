:jbake-title: Deployment View
:jbake-type: page_toc
:jbake-status: published
:jbake-menu: arc42
:jbake-order: 7
:filename: /chapters/07_deployment_view.adoc
ifndef::imagesdir[:imagesdir: ../../images]

:toc:

[[section-deployment-view]]
== Deployment View

This chapter describes the infrastructure and environment for the MCP Documentation Server.

=== Deployment Strategy

The application is designed to be lightweight and self-contained, in line with its constraints (no external services). Two deployment strategies are supported:

==== Local Development / MCP Integration

For local development and MCP client integration, the server runs directly via uv:

[source,bash]
----
# Install dependencies and run
uv sync
uv run dacli-mcp --project-path /path/to/docs

# Or configure in MCP client (e.g., Claude Desktop)
# ~/.config/claude/claude_desktop_config.json
{
  "mcpServers": {
    "docs-server": {
      "command": "uv",
      "args": ["run", "dacli-mcp"],
      "cwd": "/path/to/mcp-docs-server",
      "env": {
        "PROJECT_PATH": "/path/to/documentation"
      }
    }
  }
}
----

==== Docker Deployment

For production or isolated environments, the application is packaged into a Docker container:

[source,dockerfile]
----
FROM python:3.12-slim

# Install uv
COPY --from=ghcr.io/astral-sh/uv:latest /uv /usr/local/bin/uv

WORKDIR /app
COPY pyproject.toml uv.lock ./
RUN uv sync --frozen --no-dev

COPY src/ ./src/
EXPOSE 8000

CMD ["uv", "run", "dacli-mcp"]
----

The Web Interface (SPA) is a set of static files (HTML, CSS, JS) that can be served by any web server or even directly by the FastAPI backend for simplicity.

=== Production Environment

The production environment is envisioned as a single virtual or physical machine running Docker.

[plantuml, deployment-overview, svg]
----
@startuml
!include <C4/C4_Deployment>
LAYOUT_WITH_LEGEND()

title Deployment Diagram

Deployment_Node('prod_server', 'Production Server', 'e.g. AWS EC2') {
    Deployment_Node('docker', 'Docker Engine') {
        Container(api_container, "MCP API Server", "Python/FastAPI")
        Container(web_server, "Web Server", "Nginx")
    }
    Node('doc_folder', 'Documentation Project', 'File System')
}

Rel(web_server, api_container, "Forwards API calls to", "HTTPS")
Rel(api_container, doc_folder, "Mounts and interacts with", "File System API")
@enduml
----
